# Chapter 9.2: Tailwind CSS

## Overview

Tailwind CSS is a utility-first CSS framework that lets you build designs directly in your markup. Instead of writing custom CSS, you compose styles using pre-defined utility classes.

## Setup

When creating a new Next.js project, select Tailwind when prompted:

```bash
npx create-next-app@latest my-app
# ✔ Would you like to use Tailwind CSS? Yes
```

### Manual Installation

```bash
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p
```

Configure `tailwind.config.ts`:

```ts
// tailwind.config.ts
import type { Config } from 'tailwindcss';

const config: Config = {
  content: [
    './pages/**/*.{js,ts,jsx,tsx,mdx}',
    './components/**/*.{js,ts,jsx,tsx,mdx}',
    './app/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {},
  },
  plugins: [],
};

export default config;
```

Add Tailwind directives to your global CSS:

```css
/* app/globals.css */
@tailwind base;
@tailwind components;
@tailwind utilities;
```

## Core Concepts

### Utility Classes

Instead of writing CSS:

```css
.button {
  padding: 0.5rem 1rem;
  background-color: #3b82f6;
  color: white;
  border-radius: 0.375rem;
}
```

You write:

```jsx
<button className="px-4 py-2 bg-blue-500 text-white rounded-md">
  Click me
</button>
```

### Common Utilities

| Category | Examples |
|----------|----------|
| **Spacing** | `p-4`, `m-2`, `px-6`, `my-auto`, `gap-4` |
| **Sizing** | `w-full`, `h-screen`, `max-w-md`, `min-h-0` |
| **Colors** | `bg-blue-500`, `text-gray-700`, `border-red-300` |
| **Typography** | `text-lg`, `font-bold`, `leading-relaxed` |
| **Flexbox** | `flex`, `justify-center`, `items-start`, `flex-col` |
| **Grid** | `grid`, `grid-cols-3`, `col-span-2`, `gap-4` |
| **Borders** | `border`, `rounded-lg`, `border-2`, `border-dashed` |
| **Effects** | `shadow-md`, `opacity-50`, `blur-sm` |

## Responsive Design

Tailwind uses mobile-first breakpoints:

| Prefix | Min Width |
|--------|-----------|
| `sm:` | 640px |
| `md:` | 768px |
| `lg:` | 1024px |
| `xl:` | 1280px |
| `2xl:` | 1536px |

```jsx
// Mobile: 1 column, Tablet: 2 columns, Desktop: 3 columns
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  <Card />
  <Card />
  <Card />
</div>

// Mobile: hidden, Desktop: visible
<nav className="hidden lg:flex">
  ...
</nav>
```

## State Variants

### Hover, Focus, Active

```jsx
<button className="bg-blue-500 hover:bg-blue-700 focus:ring-2 active:bg-blue-800">
  Hover me
</button>
```

### Group and Peer States

```jsx
// Parent hover affects child
<div className="group p-4 hover:bg-gray-100">
  <h3 className="group-hover:text-blue-500">Title</h3>
  <p className="group-hover:text-gray-700">Description</p>
</div>

// Sibling state affects element
<input className="peer" type="checkbox" />
<label className="peer-checked:text-green-500">Checked!</label>
```

### Form States

```jsx
<input 
  className="border focus:border-blue-500 focus:ring-2 disabled:bg-gray-100 disabled:cursor-not-allowed invalid:border-red-500"
/>
```

## Dark Mode

Enable dark mode in config:

```ts
// tailwind.config.ts
import type { Config } from 'tailwindcss';

const config: Config = {
  darkMode: 'class', // or 'media' for system preference
  // ...
};

export default config;
```

Use dark mode variants:

```jsx
<div className="bg-white dark:bg-gray-800 text-gray-900 dark:text-white">
  <h1 className="text-2xl dark:text-gray-100">Hello</h1>
</div>
```

## Customization

### Extending the Theme

```ts
// tailwind.config.ts
import type { Config } from 'tailwindcss';

const config: Config = {
  content: ['./app/**/*.{js,ts,jsx,tsx,mdx}', './components/**/*.{js,ts,jsx,tsx,mdx}'],
  theme: {
    extend: {
      colors: {
        brand: {
          50: '#f0f9ff',
          500: '#0ea5e9',
          900: '#0c4a6e',
        },
      },
      fontFamily: {
        sans: ['Inter', 'sans-serif'],
      },
      spacing: {
        '128': '32rem',
      },
    },
  },
  plugins: [],
};

export default config;
```

Use custom values:

```jsx
<div className="bg-brand-500 font-sans p-128">
```

### Custom Classes with @apply

```css
/* globals.css */
@layer components {
  .btn-primary {
    @apply px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-700 transition-colors;
  }
  
  .card {
    @apply p-6 bg-white rounded-lg shadow-md border border-gray-200;
  }
}
```

```jsx
<button className="btn-primary">Click me</button>
<div className="card">Content</div>
```

## Examples

### Basic Example: Simple Card

```tsx
interface CardProps {
  title: string;
  description: string;
}

export function Card({ title, description }: CardProps) {
  return (
    <div className="p-6 bg-white rounded-lg shadow-md border border-gray-200 hover:shadow-lg transition-shadow">
      <h3 className="text-xl font-semibold text-gray-900 mb-2">
        {title}
      </h3>
      <p className="text-gray-600 leading-relaxed">
        {description}
      </p>
    </div>
  );
}
```

### Normal Example: Button Component

```tsx
const variants = {
  primary: 'bg-blue-500 text-white hover:bg-blue-700',
  secondary: 'bg-gray-200 text-gray-800 hover:bg-gray-300',
  danger: 'bg-red-500 text-white hover:bg-red-700',
  outline: 'border-2 border-blue-500 text-blue-500 hover:bg-blue-50',
} as const;

const sizes = {
  sm: 'px-3 py-1.5 text-sm',
  md: 'px-4 py-2 text-base',
  lg: 'px-6 py-3 text-lg',
} as const;

interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: keyof typeof variants;
  size?: keyof typeof sizes;
  children: React.ReactNode;
}

export function Button({
  variant = 'primary',
  size = 'md',
  children,
  className = '',
  ...props
}: ButtonProps) {
  return (
    <button
      className={`
        inline-flex items-center justify-center
        font-medium rounded-md
        transition-colors duration-200
        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
        disabled:opacity-50 disabled:cursor-not-allowed
        ${variants[variant]}
        ${sizes[size]}
        ${className}
      `}
      {...props}
    >
      {children}
    </button>
  );
}
```

### Complex Example: Responsive Dashboard Layout

```tsx
interface DashboardLayoutProps {
  children: React.ReactNode;
}

export function DashboardLayout({ children }: DashboardLayoutProps) {
  return (
    <div className="min-h-screen bg-gray-100">
      {/* Header */}
      <header className="bg-white shadow-sm">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center h-16">
            <div className="flex items-center">
              <span className="text-xl font-bold text-gray-900">Dashboard</span>
            </div>
            <nav className="hidden md:flex space-x-8">
              <a href="#" className="text-gray-500 hover:text-gray-900">Home</a>
              <a href="#" className="text-gray-500 hover:text-gray-900">Projects</a>
              <a href="#" className="text-gray-500 hover:text-gray-900">Settings</a>
            </nav>
            <div className="flex items-center">
              <button className="md:hidden p-2">
                <span className="sr-only">Open menu</span>
                ☰
              </button>
              <div className="hidden md:block">
                <img 
                  className="h-8 w-8 rounded-full" 
                  src="/avatar.jpg" 
                  alt="User"
                />
              </div>
            </div>
          </div>
        </div>
      </header>

      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="flex flex-col lg:flex-row gap-8">
          {/* Sidebar */}
          <aside className="w-full lg:w-64 flex-shrink-0">
            <div className="bg-white rounded-lg shadow p-6">
              <h2 className="text-lg font-semibold text-gray-900 mb-4">
                Quick Links
              </h2>
              <nav className="space-y-2">
                <a href="#" className="block px-3 py-2 rounded-md bg-blue-50 text-blue-700">
                  Overview
                </a>
                <a href="#" className="block px-3 py-2 rounded-md text-gray-600 hover:bg-gray-50">
                  Analytics
                </a>
                <a href="#" className="block px-3 py-2 rounded-md text-gray-600 hover:bg-gray-50">
                  Reports
                </a>
              </nav>
            </div>
          </aside>

          {/* Main content */}
          <main className="flex-1">
            <div className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
              {children}
            </div>
          </main>
        </div>
      </div>
    </div>
  );
}
```

### Edge Case Example: Complex Form with Validation States

```tsx
interface FormFieldProps {
  label: string;
  error?: string;
  hint?: string;
  children: React.ReactNode;
}

export function FormField({ label, error, hint, children }: FormFieldProps) {
  return (
    <div className="space-y-1">
      <label className="block text-sm font-medium text-gray-700">
        {label}
      </label>
      {children}
      {hint && !error && (
        <p className="text-sm text-gray-500">{hint}</p>
      )}
      {error && (
        <p className="text-sm text-red-600 flex items-center gap-1">
          <span>⚠</span> {error}
        </p>
      )}
    </div>
  );
}

interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {
  error?: string;
}

export function Input({ error, ...props }: InputProps) {
  return (
    <input
      className={`
        block w-full px-3 py-2 rounded-md shadow-sm
        border transition-colors duration-200
        focus:outline-none focus:ring-2 focus:ring-offset-0
        disabled:bg-gray-100 disabled:cursor-not-allowed
        ${error
          ? 'border-red-300 text-red-900 placeholder-red-300 focus:ring-red-500 focus:border-red-500'
          : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500'
        }
      `}
      {...props}
    />
  );
}

// Usage
<FormField label="Email" error={errors.email} hint="We'll never share your email">
  <Input
    type="email"
    error={errors.email}
    placeholder="you@example.com"
  />
</FormField>
```

## Organizing Tailwind Classes

### Using clsx for Conditional Classes

```tsx
import clsx from 'clsx';

type AlertType = 'info' | 'success' | 'warning' | 'error';

interface AlertProps {
  type: AlertType;
  children: React.ReactNode;
}

function Alert({ type, children }: AlertProps) {
  return (
    <div className={clsx(
      'p-4 rounded-md',
      {
        'bg-blue-50 text-blue-700': type === 'info',
        'bg-green-50 text-green-700': type === 'success',
        'bg-yellow-50 text-yellow-700': type === 'warning',
        'bg-red-50 text-red-700': type === 'error',
      }
    )}>
      {children}
    </div>
  );
}
```

### Class Variance Authority (cva)

For complex component variants:

```bash
npm install class-variance-authority
```

```tsx
import { cva, type VariantProps } from 'class-variance-authority';

const button = cva(
  'inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2',
  {
    variants: {
      intent: {
        primary: 'bg-blue-500 text-white hover:bg-blue-700',
        secondary: 'bg-gray-200 text-gray-800 hover:bg-gray-300',
        danger: 'bg-red-500 text-white hover:bg-red-700',
      },
      size: {
        sm: 'px-3 py-1.5 text-sm',
        md: 'px-4 py-2 text-base',
        lg: 'px-6 py-3 text-lg',
      },
    },
    defaultVariants: {
      intent: 'primary',
      size: 'md',
    },
  }
);

interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof button> {}

export function Button({ intent, size, className, ...props }: ButtonProps) {
  return <button className={button({ intent, size, className })} {...props} />;
}
```

## Key Takeaways

- Tailwind uses utility classes for styling
- Mobile-first responsive design with `sm:`, `md:`, `lg:` prefixes
- State variants: `hover:`, `focus:`, `active:`, `disabled:`
- Dark mode with `dark:` prefix
- Extend theme in `tailwind.config.ts`
- Use `@apply` for reusable component classes
- Use `clsx` or `cva` for conditional/variant classes

## Questions & Answers

### Q: Isn't this just inline styles?
**A:** No. Tailwind provides responsive prefixes, state variants, and consistency through a design system. It's also purged to only include used classes.

### Q: How do I avoid long class strings?
**A:** Extract components, use `@apply` for repeated patterns, or use tools like cva for variants.

### Q: Does Tailwind increase bundle size?
**A:** No. Tailwind purges unused classes in production, typically resulting in <10KB of CSS.

## Resources

- [Tailwind CSS Documentation](https://tailwindcss.com/docs)
- [Tailwind CSS Cheat Sheet](https://nerdcave.com/tailwind-cheat-sheet)
- [Headless UI](https://headlessui.com) - Unstyled accessible components
- [Class Variance Authority](https://cva.style)

