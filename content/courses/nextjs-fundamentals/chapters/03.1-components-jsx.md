# Chapter 3.1: Components & JSX

## What Are Components?

Components are the building blocks of React applications. A component is a reusable piece of UI that can contain its own structure, styling, and logic. Think of them as custom HTML elements you create yourself.

```tsx
// A simple component
function Greeting() {
  return <h1>Hello, World!</h1>;
}

// Using the component (like using an HTML element)
<Greeting />
```

Every React application is a tree of components. A typical page might look like:

```
App
├── Header
│   ├── Logo
│   └── Navigation
├── Main
│   ├── Hero
│   ├── Features
│   │   ├── FeatureCard
│   │   ├── FeatureCard
│   │   └── FeatureCard
│   └── Testimonials
└── Footer
```

## Creating Components

### Basic Function Component

```tsx
// components/Button.tsx
function Button() {
  return <button>Click me</button>;
}

export default Button;
```

### Arrow Function Component

```tsx
// components/Button.tsx
const Button = () => {
  return <button>Click me</button>;
};

export default Button;
```

Both styles work identically. Function declarations are hoisted (can be used before they're defined in the file), while arrow functions are not. Choose one style and be consistent.

### Exporting Components

```tsx
// Default export (one per file)
export default function Button() {
  return <button>Click me</button>;
}

// Named export (multiple per file)
export function PrimaryButton() {
  return <button className="primary">Primary</button>;
}

export function SecondaryButton() {
  return <button className="secondary">Secondary</button>;
}
```

Importing:
```tsx
// Default import
import Button from './Button';

// Named imports
import { PrimaryButton, SecondaryButton } from './Buttons';

// Renaming imports
import { PrimaryButton as MainButton } from './Buttons';
```

## JSX: JavaScript XML

JSX is a syntax extension that lets you write HTML-like code in TypeScript (or JavaScript). It's not HTML—it's syntactic sugar that compiles to JavaScript function calls.

```tsx
// What you write (JSX)
const element = <h1 className="title">Hello</h1>;

// What it compiles to (JavaScript)
const element = React.createElement('h1', { className: 'title' }, 'Hello');
```

### JSX Rules

#### 1. Return a Single Root Element

Components must return one root element. Use a wrapper or Fragment.

```tsx
// ❌ Error: Adjacent JSX elements must be wrapped
function Bad() {
  return (
    <h1>Title</h1>
    <p>Paragraph</p>
  );
}

// ✅ Wrap in a div
function Good() {
  return (
    <div>
      <h1>Title</h1>
      <p>Paragraph</p>
    </div>
  );
}

// ✅ Use a Fragment (no extra DOM element)
function Better() {
  return (
    <>
      <h1>Title</h1>
      <p>Paragraph</p>
    </>
  );
}
```

#### 2. Close All Tags

Every tag must be closed, including self-closing tags.

```tsx
// ❌ HTML-style (invalid in JSX)
<img src="photo.jpg">
<input type="text">
<br>

// ✅ JSX-style (self-closing)
<img src="photo.jpg" />
<input type="text" />
<br />
```

#### 3. Use camelCase for Attributes

HTML attributes become camelCase in JSX.

```tsx
// HTML
<div class="container" onclick="handleClick()" tabindex="0">

// JSX
<div className="container" onClick={handleClick} tabIndex={0}>
```

Common conversions:
- `class` → `className`
- `for` → `htmlFor`
- `onclick` → `onClick`
- `tabindex` → `tabIndex`
- `readonly` → `readOnly`

#### 4. TypeScript Expressions in Curly Braces

Use `{}` to embed TypeScript expressions in JSX.

```tsx
function Profile() {
  const name = "Alice";
  const age = 28;
  const isAdmin = true;
  
  return (
    <div>
      <h1>{name}</h1>
      <p>Age: {age}</p>
      <p>Next year: {age + 1}</p>
      <p>Role: {isAdmin ? 'Admin' : 'User'}</p>
      <p>Uppercase: {name.toUpperCase()}</p>
    </div>
  );
}
```

You can use any TypeScript expression—variables, math, function calls, ternaries—but not statements (if, for, while).

```tsx
// ✅ Expressions work
{name}
{2 + 2}
{isLoggedIn ? 'Welcome' : 'Please log in'}
{items.map(item => <li key={item.id}>{item.name}</li>)}

// ❌ Statements don't work
{if (isLoggedIn) { return 'Welcome'; }}  // Error
{for (let i = 0; i < 5; i++) { }}        // Error
```

### JSX is Not a String

A common mistake is treating JSX as a string:

```tsx
// ❌ Wrong: JSX in a string
const element = "<h1>Hello</h1>";

// ✅ Correct: JSX as code
const element = <h1>Hello</h1>;
```

## Component Examples

### Basic Example

```tsx
// components/WelcomeCard.tsx
function WelcomeCard() {
  return (
    <div className="card">
      <h2>Welcome!</h2>
      <p>Thanks for visiting our site.</p>
    </div>
  );
}

export default WelcomeCard;
```

### Normal Example (With Logic)

```tsx
// components/UserGreeting.tsx
function UserGreeting() {
  const currentHour = new Date().getHours();
  
  let greeting;
  if (currentHour < 12) {
    greeting = "Good morning";
  } else if (currentHour < 18) {
    greeting = "Good afternoon";
  } else {
    greeting = "Good evening";
  }
  
  return (
    <div className="greeting">
      <h1>{greeting}!</h1>
      <p>Current time: {new Date().toLocaleTimeString()}</p>
    </div>
  );
}

export default UserGreeting;
```

### Complex Example (Composition)

```tsx
// components/ProductCard.tsx
function ProductImage({ src, alt }) {
  return (
    <div className="product-image">
      <img src={src} alt={alt} />
    </div>
  );
}

function ProductInfo({ name, price, rating }) {
  return (
    <div className="product-info">
      <h3>{name}</h3>
      <p className="price">${price.toFixed(2)}</p>
      <p className="rating">{"⭐".repeat(rating)}</p>
    </div>
  );
}

function ProductCard({ product }) {
  return (
    <article className="product-card">
      <ProductImage src={product.image} alt={product.name} />
      <ProductInfo 
        name={product.name} 
        price={product.price} 
        rating={product.rating} 
      />
      <button className="add-to-cart">Add to Cart</button>
    </article>
  );
}

export default ProductCard;
```

### Edge Case Example (Handling Empty/Null)

```tsx
// components/Avatar.tsx
function Avatar({ user }) {
  // Handle missing user
  if (!user) {
    return (
      <div className="avatar avatar-placeholder">
        <span>?</span>
      </div>
    );
  }
  
  // Handle missing image
  if (!user.avatarUrl) {
    return (
      <div className="avatar avatar-initials">
        <span>{user.name.charAt(0).toUpperCase()}</span>
      </div>
    );
  }
  
  return (
    <div className="avatar">
      <img 
        src={user.avatarUrl} 
        alt={`${user.name}'s avatar`}
        onError={(e) => {
          // Fallback if image fails to load
          e.target.style.display = 'none';
        }}
      />
    </div>
  );
}

export default Avatar;
```

## Fragments

Fragments let you group elements without adding extra DOM nodes.

```tsx
// Long syntax
import { Fragment } from 'react';

function List() {
  return (
    <Fragment>
      <li>Item 1</li>
      <li>Item 2</li>
    </Fragment>
  );
}

// Short syntax (more common)
function List() {
  return (
    <>
      <li>Item 1</li>
      <li>Item 2</li>
    </>
  );
}
```

When you need to add a key (in lists), use the long syntax:

```tsx
import { Fragment } from 'react';

function Glossary({ items }) {
  return (
    <dl>
      {items.map(item => (
        <Fragment key={item.id}>
          <dt>{item.term}</dt>
          <dd>{item.definition}</dd>
        </Fragment>
      ))}
    </dl>
  );
}
```

## Component Organization in Next.js

In Next.js projects, organize components by feature or type:

```
app/
├── components/          # Shared components
│   ├── ui/             # Generic UI components
│   │   ├── Button.tsx
│   │   ├── Card.tsx
│   │   └── Modal.tsx
│   ├── layout/         # Layout components
│   │   ├── Header.tsx
│   │   ├── Footer.tsx
│   │   └── Sidebar.tsx
│   └── forms/          # Form components
│       ├── Input.tsx
│       └── Select.tsx
├── blog/               # Blog feature
│   ├── page.tsx
│   └── components/     # Blog-specific components
│       ├── PostCard.tsx
│       └── PostList.tsx
└── page.tsx
```

## Key Takeaways

- Components are reusable pieces of UI
- Function components are the standard way to create components
- JSX is HTML-like syntax that compiles to JavaScript
- JSX has rules: single root element, close all tags, camelCase attributes
- Use `{}` for TypeScript expressions in JSX
- Fragments (`<>...</>`) group elements without extra DOM nodes
- Organize components logically in your project structure

## Questions & Answers

### Q: When should I create a new component?
**A:** Create a new component when:
- A piece of UI is reused in multiple places
- A section is complex enough to benefit from isolation
- You want to improve readability by breaking down a large component
- The piece has its own distinct responsibility

### Q: What's the difference between components and elements?
**A:** Elements are the objects that components return. A component is a function that returns elements. `<Button />` creates an element; `function Button() {}` defines a component.

### Q: Can I use regular HTML in React?
**A:** JSX compiles to JavaScript, so you're always working with React elements. However, JSX closely mirrors HTML, so the transition is smooth.

### Q: Why className instead of class?
**A:** `class` is a reserved keyword in JavaScript. JSX is JavaScript, so it uses `className` to avoid conflicts.

### Q: Should I use default or named exports?
**A:** Convention varies. Next.js pages require default exports. For components, either works. Named exports make refactoring easier (renaming is explicit), while default exports allow any import name.

### Q: How do I add comments in JSX?
**A:** Use TypeScript/JavaScript comments inside curly braces:
```tsx
return (
  <div>
    {/* This is a comment */}
    <h1>Title</h1>
  </div>
);
```

## Resources

- [React: Your First Component](https://react.dev/learn/your-first-component)
- [React: Writing Markup with JSX](https://react.dev/learn/writing-markup-with-jsx)
- [React: JavaScript in JSX with Curly Braces](https://react.dev/learn/javascript-in-jsx-with-curly-braces)

---

**Next:** [3.2 Props & Data Flow](./03.2-props-data-flow.md) - Learn how to pass data between components.
